document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("searchInput"),t=document.getElementById("beladrop"),l=document.getElementById("dalmadrop"),n=document.getElementById("droporsi"),a=document.getElementById("marditdrop"),szilvi=document.getElementById("szilvidrop"),fanni=document.getElementById("dropfanni"),brigi=document.getElementById("dropbrigi"),rita=document.getElementById("droprita"),o=[],i=[],r=[],c=[],f=[],baj=[],rt={};fetch("https://raw.githubusercontent.com/And-reyya/scumtools/main/scumdata.json").then(e=>e.json()).then(e=>{o=e.scumbela,i=e.scumorsi,r=e.scummargit}).catch(e=>console.error("Hiba a JSON betöltésekor:",e)),fetch("https://raw.githubusercontent.com/And-reyya/scumtools2/main/scumdata2.json").then(e=>e.json()).then(e=>{c=e.scumszilvi,f=e.scumfanni,baj=e.scumbrigi,rt=e.scumrita}).catch(e=>console.error("Hiba a JSON betöltésekor:",e)),e.addEventListener("input",updateDropdown);let d=-1,y=-1,u=-1,m=-1,gf=-1,b=-1,br=-1,rtidx=-1;function updateDropdown(){let d=e.value.toLowerCase().trim();if(console.log("Search query:",d),d.length>0){let p=o.filter(e=>e.toLowerCase().startsWith(d));console.log("Filtered data:",p),p.length>0?(t.style.display="block",t.innerHTML="",p.forEach(o=>{let d=document.createElement("p");d.textContent=o,d.addEventListener("click",function(){var d;e.value=o,t.style.display="none",d=o,l.innerHTML="",["AMMO","MAGAZINE","SIGHT","SCOPE","RAIL","FLASHLIGHT","SUPRESSOR","BAYONETT"].forEach(t=>{(function e(t,l,n){let a=document.createElement("button");a.textContent=l,a.addEventListener("click",n),t.appendChild(a)})(l,t,()=>{"RAIL"===t?(function t(l){let n=rt[l];if(n){rita.innerHTML="";let a=n.split(", ");a.forEach(t=>{let l=document.createElement("p");l.textContent=t,l.addEventListener("click",()=>{e.value=`${e.value}; ${t}`,rita.style.display="none"}),rita.appendChild(l)}),rita.style.display="block",rtidx=-1}}(d),l.style.display="none"):"AMMO"===t?(function t(l){let a=i.find(e=>e.weapon.toLowerCase()===l.toLowerCase().trim());if(a){n.innerHTML="";let o=a.ammo,r=[...new Set(o)];r.forEach(t=>{let l=document.createElement("p");l.textContent=t,l.addEventListener("click",()=>{e.value=`${e.value}; ${t}`,n.style.display="none"}),n.appendChild(l)}),n.style.display="block",u=-1}}(d),l.style.display="none"):"MAGAZINE"===t?(function t(l){let n=r.find(e=>e.weapon.toLowerCase()===l.toLowerCase().trim());if(n){a.innerHTML="";let o=n.magazine.split(", "),i=Array.isArray(n.capacity)?n.capacity:[n.capacity];o.forEach((t,l)=>{let n=i[l]?i[l]:i[0],o=document.createElement("p");o.textContent=`${t} (${n})`,o.addEventListener("click",()=>{e.value=`${e.value}; ${t} (${n})`,a.style.display="none"}),a.appendChild(o)}),a.style.display="block",m=-1}}(d),l.style.display="none"):"SUPRESSOR"===t?(function t(l){let n=c[l];if(n){szilvi.innerHTML="";let a=n.split(", ");a.forEach(t=>{let l=document.createElement("p");l.textContent=t,l.addEventListener("click",()=>{e.value=`${e.value}; ${t}`,szilvi.style.display="none"}),szilvi.appendChild(l)}),szilvi.style.display="block",gf=-1}}(d),l.style.display="none"):"FLASHLIGHT"===t?(function t(l){let n=f[l];if(n){fanni.innerHTML="";let a=n.split(", ");a.forEach(t=>{let l=document.createElement("p");l.textContent=t,l.addEventListener("click",()=>{e.value=`${e.value}; ${t}`,fanni.style.display="none"}),fanni.appendChild(l)}),fanni.style.display="block",b=-1}}(d),l.style.display="none"):"BAYONETT"===t&&(function t(l){let n=baj[l];if(n){brigi.innerHTML="";let a=n.split(", ");a.forEach(t=>{let l=document.createElement("p");l.textContent=t,l.addEventListener("click",()=>{e.value=`${e.value}; ${t}`,brigi.style.display="none"}),brigi.appendChild(l)}),brigi.style.display="block",br=-1}}(d),l.style.display="none"),console.log(`${t} button clicked`)})}),l.style.display="block",y=-1}),t.appendChild(d)})):t.style.display="none"}else t.style.display="none"}function g(e,t){e&&0!==e.length&&(function e(t){for(let l of t)l.classList.remove("dropdown-active")}(e),t>=e.length&&(t=e.length-1),t<0&&(t=0),e[t].classList.add("dropdown-active"),e[t].scrollIntoView({block:"nearest"}))}e.addEventListener("keydown",function(s){let o=t.getElementsByTagName("p"),i=l.getElementsByTagName("button"),c=n.getElementsByTagName("p"),p=a.getElementsByTagName("p"),h=szilvi.getElementsByTagName("p"),f=fanni.getElementsByTagName("p"),bg=brigi.getElementsByTagName("p"),rtlist=rita.getElementsByTagName("p");"Backspace"===s.key?setTimeout(function(){updateDropdown(),0===e.value.length&&(t.style.display="none",l.style.display="none",n.style.display="none",a.style.display="none",szilvi.style.display="none",fanni.style.display="none",brigi.style.display="none",rita.style.display="none")},0):"ArrowDown"===s.key?(s.preventDefault(),"block"===t.style.display?(d=(d+1)%o.length,g(o,d)):"block"===l.style.display?(y=(y+1)%i.length,g(i,y)):"block"===n.style.display?(u=(u+1)%c.length,g(c,u)):"block"===a.style.display?(m=(m+1)%p.length,g(p,m)):"block"===szilvi.style.display?(gf=(gf+1)%h.length,g(h,gf)):"block"===fanni.style.display?(b=(b+1)%f.length,g(f,b)):"block"===brigi.style.display?(br=(br+1)%bg.length,g(bg,br)):"block"===rita.style.display&&(rtidx=(rtidx+1)%rtlist.length,g(rtlist,rtidx))):"ArrowUp"===s.key?(s.preventDefault(),"block"===t.style.display?(d=(d-1+o.length)%o.length,g(o,d)):"block"===l.style.display?(y=(y-1+i.length)%i.length,g(i,y)):"block"===n.style.display?(u=(u-1+c.length)%c.length,g(c,u)):"block"===a.style.display?(m=(m-1+p.length)%p.length,g(p,m)):"block"===szilvi.style.display?(gf=(gf-1+h.length)%h.length,g(h,gf)):"block"===fanni.style.display?(b=(b-1+f.length)%f.length,g(f,b)):"block"===brigi.style.display?(br=(br-1+bg.length)%bg.length,g(bg,br)):"block"===rita.style.display&&(rtidx=(rtidx-1+rtlist.length)%rtlist.length,g(rtlist,rtidx))):"Enter"===s.key&&(s.preventDefault(),"block"===t.style.display&&d>=0&&d<o.length?o[d].click():"block"===l.style.display&&y>=0&&y<i.length?i[y].click():"block"===n.style.display&&u>=0&&u<c.length?c[u].click():"block"===a.style.display&&m>=0&&m<p.length?p[m].click():"block"===szilvi.style.display&&gf>=0&&gf<h.length?h[gf].click():"block"===fanni.style.display&&b>=0&&b<f.length?f[b].click():"block"===brigi.style.display&&br>=0&&br<bg.length?bg[br].click():"block"===rita.style.display&&rtidx>=0&&rtidx<rtlist.length&&rtlist[rtidx].click())})});
